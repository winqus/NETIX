<!-- eslint-disable @angular-eslint/template/label-has-associated-control -->
<div class="flex flex-col items-center align-middle mb:px-24 xl:px-44 h-full">
  <progress class="progress w-[80%] m-12" [value]="calculateProgress()" max="100"></progress>

  @if (currentStep === UploadSteps.FileSelection) {
    <label
      for="dropzone-file"
      class="flex flex-col items-center w-full h-full justify-center p-10 cursor-pointer"
      (dragover)="dragOverHandler($event)"
      (drop)="dropHandler($event)"
      (dragleave)="dragLeaveHandler($event)"
    >
      <div class="card bg-slate-950 hover:bg-black p-16 rounded-md m-10" [class.bg-black]="isDraggingOver">
        <svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" fill="currentColor" class="" viewBox="0 0 16 16">
          <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5" />
          <path d="M7.646 1.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1-.708.708L8.5 2.707V11.5a.5.5 0 0 1-1 0V2.707L5.354 4.854a.5.5 0 1 1-.708-.708z" />
        </svg>
      </div>
      @if (videoFile === null) {
        <p class="mb-2 text-sm"><span class="font-semibold">Click to upload</span> or drag and drop</p>
        <p class="text-xs">MP4, MOV, MKV or HEVC</p>
      } @else {
        <p class="text-ellipsis overflow-hidden w-full mb-2 text-sm text-center"><span class="font-semibold">Uploaded</span> {{ this.videoFile.name }}</p>
      }
      <input id="dropzone-file" type="file" class="hidden" (change)="onFileSelected($event)" accept="video/mp4,video/mov,video/mkv,video/hevc" />
    </label>
    <!-- <button class="btn btn-primary rounded-md" [disabled]="videoFile === null" (click)="goToDetailsFilling()">Next</button> -->
    <button class="btn btn-primary rounded-md" (click)="goToDetailsFilling()">Next</button>
  } @else if (currentStep === UploadSteps.DetailsFilling) {
    <div class="text-center items-center align-middle w-[40%] h-full">
      <div class="text-left w-full">
        <label for="media-title" class="block text-sm font-medium text-gray-700 to-white w-full">Title</label>
        <input type="text" placeholder="Enter media title" class="input input-bordered w-full mb-4" (change)="onChangeTitle($event)" [value]="mediaTitle" />
      </div>
      <div class="text-left">
        <label for="media-title" class="block text-sm font-medium text-gray-700 to-white">Release date</label>
        <input type="date" class="input input-bordered w-full mb-4" (change)="onChangeDate($event)" [value]="mediaDate" />
      </div>
      <div class="flex flex-row justify-between gap-10">
        <button class="btn btn-primary rounded-md" (click)="goToFileSelection()">Back</button>
        <button class="btn btn-primary rounded-md" (click)="goToThumnNailSelection()">Next</button>
      </div>
    </div>
  }
</div>
